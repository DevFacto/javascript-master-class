<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Javascript Master Class by DevFacto</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="icon" href="http://www.devfacto.com/wp-content/themes/wp-devfacto/favicon.ico">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Javascript Master Class</h1>
        <p>Become awesomer at the JavaScript</p>

        <p class="view"><a href="https://github.com/DevFacto/javascript-master-class">View the Project on GitHub</a></p>

      </header>
      <section>
      <h1>Creating an angular js application with Visual Studio</h1>
<h3>Creating the application</h3>
<ul>
<li>Go to File -&gt; New -&gt; Project...</li>
<li>Select  &quot;ASP.NET MVC 4 Web Application&quot;</li>
<li>Give your application a name - I called mine &quot;AngularApp&quot;</li>
<li>Click OK</li>
<li>Select the Web API project template and the Razor view engine</li>
<li>Click OK </li>
</ul>
<h3>Let&#39;s set up our dependencies</h3>
<p>Right click on project and select &quot;Manage Nuget Packages&quot;. Let&#39;s clean up and get rid of some of the stuff we don&#39;t want:</p>
<p>Go to the &quot;Installed packages&quot; section</p>
<ul>
<li>Uninstall knockoutjs </li>
<li>Uninstall jquery ui</li>
</ul>
<p>Go to the &quot;Online&quot; section and:</p>
<ul>
<li>search for angular js and install it</li>
<li>Search for bootstrap and install that too</li>
</ul>
<p>Close the nuget package manager for now.</p>
<h3>Set some folders for our angular stuff.. exciting!</h3>
<ul>
<li>Add a new at ~/Scripts/app . </li>
<li>We&#39;ll set up a few subfolders too:<ul>
<li>~/Scripts/app/controllers</li>
<li>~/Scripts/app/directives</li>
<li>~/Scripts/app/views</li>
</ul>
</li>
</ul>
<h3>Configure our bundles</h3>
<ul>
<li>Navigate to ~/App_Start/BundleConfig.cs</li>
<li>Remove the jqueryui bundle, and add our own for bootstrap and angular</li>
</ul>
<pre><code>public static void RegisterBundles(BundleCollection bundles)
{
    bundles<span class="preprocessor">.Add</span>(new StyleBundle(<span class="string">"~/Content/bootstrap"</span>)
        <span class="preprocessor">.Include</span>(<span class="string">"~/Content/bootstrap.css"</span>, 
        <span class="string">"~/Content/bootstrap-responsive.css"</span>))<span class="comment">;</span>

    bundles<span class="preprocessor">.Add</span>(new StyleBundle(<span class="string">"~/Content/css"</span>)
        <span class="preprocessor">.Include</span>(<span class="string">"~/Content/Site.css"</span>))<span class="comment">;</span>

    bundles<span class="preprocessor">.Add</span>(new ScriptBundle(<span class="string">"~/bundles/jquery"</span>)
        <span class="preprocessor">.Include</span>(<span class="string">"~/Scripts/jquery-{version}.js"</span>))<span class="comment">;</span>

    bundles<span class="preprocessor">.Add</span>(new ScriptBundle(<span class="string">"~/bundles/bootstrap"</span>)
        <span class="preprocessor">.Include</span>(<span class="string">"~/Scripts/bootstrap.js"</span>))<span class="comment">;</span>

    bundles<span class="preprocessor">.Add</span>(new ScriptBundle(<span class="string">"~/bundles/angular"</span>)
        <span class="preprocessor">.Include</span>(<span class="string">"~/Scripts/angular.js"</span>))<span class="comment">;</span>

    bundles<span class="preprocessor">.Add</span>(new ScriptBundle(<span class="string">"~/bundles/angular-app"</span>)
        <span class="preprocessor">.IncludeDirectory</span>(<span class="string">"~/Scripts/app"</span>, <span class="string">"*.js"</span>, true))<span class="comment">;</span>
}</code></pre>
<h3>Clean up our Index view.</h3>
<p>We&#39;re not going to render anything server side, so…</p>
<ul>
<li>Open up ~/Views/Home/Index.cshtml and remove everything!</li>
</ul>
<h3>Let&#39;s start with a fresh slate for our CSS too...</h3>
<ul>
<li>Open up ~/Content/Site.css and remove everything! </li>
</ul>
<h3>Set up our layout to host our app</h3>
<ul>
<li>In ~/Views/Shared/_Layout.html, let&#39;s modify the content to look like this:</li>
</ul>
<pre><code><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Angular App<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"~/favicon.ico"</span> <span class="attribute">rel</span>=<span class="value">"shortcut icon"</span> <span class="attribute">type</span>=<span class="value">"image/x-icon"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width"</span> /&gt;</span>
    @Styles.Render("~/Content/bootstrap")
    @Styles.Render("~/Content/css")
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">"myApp"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"navbar navbar-fixed-top"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"navbar-inner"</span>&gt;</span>
                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"brand"</span>&gt;</span>
                    Angular App
                <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span> <span class="attribute">style</span>=<span class="value">"margin-top:50px;"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span> <span class="attribute">ng-view</span>&gt;</span>
                @RenderBody()
            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/angular")
        @Scripts.Render("~/bundles/angular-app")
        @RenderSection("scripts", required: false)
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre>
<p>The important things to note are that we added the ng-app attribute to the body and we added a div with the ng-view attribute. We don&#39;t have an app yet or a view… but we&#39;ll do that right aways!  We&#39;ve also update to include our new bundles so that the javascript we create will get delivered properly..  if you build and run the project now (F5), you should see a blank page with a simple header reading &quot;Angular App&quot;.</p>
<h3>We need a module!</h3>
<p>Let&#39;s get started creating our angular app so that ng-app attribute actually has something to grab onto.
- Create a javascript file, called app.js in the ~/Scripts/app folder
- Let&#39;s create our first module by adding the following code to this file:</p>
<pre><code><span class="string">'use strict'</span>;

<span class="keyword">var</span> myApp = angular.module(<span class="string">'myApp'</span>, []);

myApp.config([<span class="string">'$routeProvider'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(<span class="variable">$routeProvider</span>)</span> {</span>
    <span class="comment">//Set up routes</span>
    <span class="variable">$routeProvider</span>
        .when(<span class="string">'/'</span>, {
            templateUrl: <span class="string">'/Scripts/app/views/home.html'</span>,
            controller: <span class="string">'HomeCtrl'</span>
        })
        .otherwise({
           redirectTo: <span class="string">'/'</span> 
        });
   } ]);

myApp.run([<span class="string">'$rootScope'</span>, function(<span class="variable">$rootScope</span>) {

}]);</code></pre>
<h3>NEXT!!</h3>
<p>Now, we&#39;ve defined our module, our app, and we&#39;ve defined some routes. We&#39;ve said that for the default route, we want to render a home view. Remember the ng-view we defined in the template… this configuration will determine what content gets placed there depending on the route URL in the browser. But, we haven&#39;t created our view template or controller yet!</p>
<ul>
<li><p>Create an html file at ~/Scripts/app/views/home.html and replace the default content with the following:</p>
<pre><code><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"span12"</span>&gt;</span>    
  <span class="variable">{{message}}</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
</li>
<li><p>Create a JavaScript file at ~/Scripts/app/controllers/home.js and add the following content:</p>
</li>
</ul>
<pre><code><span class="xml">'use strict';
myApp.controller('HomeCtrl', ['</span><span class="variable">$scope</span><span class="xml">', function(</span><span class="variable">$scope</span><span class="xml">) {
    </span><span class="variable">$scope.message</span><span class="xml"> = “Hello worrrrllld”;    
}]);</span></code></pre>
<h3>It&#39;s ALIVE!!</h3>
<p>Now, if you rebuild your app and run it, you should see the page rendered with the text from our home view. Interesting? Probably not yet.</p>
<h3>Make it pop!</h3>
<p>Let&#39;s see if we can do something more interesting and get something from the server.</p>
<ul>
<li>Go to the default Web API controller created for us at ~/Controllers/ValuesController.cs. It&#39;s a silly name, but let’s work with it for now. Let&#39;s modify the Get() method a bit…</li>
</ul>
<p>How many hello worlds would you like?</p>
<pre><code><span class="keyword">public</span> IEnumerable&lt;<span class="keyword">string</span>&gt; Get()
{
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">string</span>[] { 
        <span class="string">"Hello World 1"</span>, 
        <span class="string">"Hello World 2"</span>, 
        <span class="string">"Hello World 3"</span>, 
        <span class="string">"Hello World 4"</span>, 
        <span class="string">"Hello World 5"</span>
    };
}</code></pre>
<ul>
<li>Let&#39;s also add some code to our angular controller at home.js:</li>
</ul>
<pre><code>myApp.controller(<span class="string">'HomeCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(<span class="variable">$scope</span>, <span class="variable">$http</span>)</span> {</span>
    <span class="variable">$scope</span>.message = <span class="string">"hello worrrllld"</span>;

    <span class="variable">$http</span>.get(<span class="string">'/api/Values'</span>).success(<span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
        <span class="variable">$scope</span>.messages = data;
    });
}]);</code></pre>
<ul>
<li><p>And let&#39;s see if we can display that in our view too. Adjust the template in your home.html file:</p>
<pre><code><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"span12"</span>&gt;</span>
  <span class="variable">{{message}}</span>

  <span class="tag">&lt;<span class="title">ul</span>&gt;</span>
      <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">"message in messages"</span>&gt;</span>
          <span class="variable">{{message}}</span>
      <span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
</li>
</ul>
<p>Oh SNAP!</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="http://DevFacto.com">DevFacto</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
  </body>
</html>