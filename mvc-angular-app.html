<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Javascript Master Class by DevFacto</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="icon" href="http://www.devfacto.com/wp-content/themes/wp-devfacto/favicon.ico">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Javascript Master Class</h1>
        <p>Become awesomer at the JavaScript</p>

        <p class="view"><a href="https://github.com/DevFacto/javascript-master-class">View the Project on GitHub</a></p>

      </header>
      <section>
      <h1>Creating an angular js application with Visual Studio</h1>
<h3>Creating the application</h3>
<ul>
<li>Go to File -&gt; New -&gt; Project...</li>
<li>Select  &quot;ASP.NET MVC 4 Web Application&quot;</li>
<li>Give your application a name - I called mine &quot;AngularApp&quot;</li>
<li>Click OK</li>
<li>Select the Web API project template and the Razor view engine</li>
<li>Click OK </li>
</ul>
<h3>Let&#39;s set up our dependencies</h3>
<p>Right click on project and select &quot;Manage Nuget Packages&quot;. Let&#39;s clean up and get rid of some of the stuff we don&#39;t want:</p>
<p>Go to the &quot;Installed packages&quot; section</p>
<ul>
<li>Uninstall knockoutjs </li>
<li>Uninstall jquery ui</li>
</ul>
<p>Go to the &quot;Online&quot; section and:</p>
<ul>
<li>search for angular js and install it</li>
<li>Search for bootstrap and install that too</li>
</ul>
<p>Close the nuget package manager for now.</p>
<h3>Prepare some folders for our angular stuff.. exciting!</h3>
<ul>
<li>Add a new folder to the solution at <strong>~/Scripts/app</strong> . </li>
<li>We&#39;ll set up a few subfolders too:<ul>
<li><strong>~/Scripts/app/controllers</strong></li>
<li><strong>~/Scripts/app/directives</strong></li>
<li><strong>~/Scripts/app/views</strong></li>
</ul>
</li>
</ul>
<h3>Configure our bundles</h3>
<p>We&#39;ll set these up now so we can embed our JavaScript and CSS in our page.</p>
<ul>
<li>Navigate to <strong>~/App_Start/BundleConfig.cs</strong></li>
<li>Remove the jqueryui bundle, and add our own for bootstrap and angular</li>
</ul>
<pre><code class="lang-cs"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> RegisterBundles(BundleCollection bundles)
{
    bundles.Add(<span class="keyword">new</span> StyleBundle(<span class="string">"~/Content/bootstrap"</span>)
        .Include(<span class="string">"~/Content/bootstrap.css"</span>, 
        <span class="string">"~/Content/bootstrap-responsive.css"</span>));

    bundles.Add(<span class="keyword">new</span> StyleBundle(<span class="string">"~/Content/css"</span>)
        .Include(<span class="string">"~/Content/Site.css"</span>));

    bundles.Add(<span class="keyword">new</span> ScriptBundle(<span class="string">"~/bundles/jquery"</span>)
        .Include(<span class="string">"~/Scripts/jquery-{version}.js"</span>));

    bundles.Add(<span class="keyword">new</span> ScriptBundle(<span class="string">"~/bundles/bootstrap"</span>)
        .Include(<span class="string">"~/Scripts/bootstrap.js"</span>));

    bundles.Add(<span class="keyword">new</span> ScriptBundle(<span class="string">"~/bundles/angular"</span>)
        .Include(<span class="string">"~/Scripts/angular.js"</span>, <span class="string">"~/Scripts/angular-resource.js"</span>));

    bundles.Add(<span class="keyword">new</span> ScriptBundle(<span class="string">"~/bundles/angular-app"</span>)
        .IncludeDirectory(<span class="string">"~/Scripts/app"</span>, <span class="string">"*.js"</span>, <span class="keyword">true</span>));
}</code></pre>
<h3>Clean up our Index view.</h3>
<p>We&#39;re not going to render anything server side, so open up <strong>~/Views/Home/Index.cshtml</strong> and remove everything!</p>
<h3>Let&#39;s start with a fresh slate for our CSS too...</h3>
<p>Open up <strong>~/Content/Site.css</strong> and remove EVERYTHING!  We&#39;re using bootstrap out tha&#39; gate, so we&#39;ll add styles as we need them, not pre-emptively.</p>
<h3>Set up our layout to host our app</h3>
<p>In <strong>~/Views/Shared/_Layout.html</strong>, let&#39;s modify the content to look like this:</p>
<pre><code class="lang-html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Angular App<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"~/favicon.ico"</span> <span class="attribute">rel</span>=<span class="value">"shortcut icon"</span> <span class="attribute">type</span>=<span class="value">"image/x-icon"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width"</span> /&gt;</span>
    @Styles.Render("~/Content/bootstrap")
    @Styles.Render("~/Content/css")
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">"myApp"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"navbar navbar-fixed-top"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"navbar-inner"</span>&gt;</span>
                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"brand"</span>&gt;</span>
                    Angular App
                <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span> <span class="attribute">style</span>=<span class="value">"margin-top:50px;"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span> <span class="attribute">ng-view</span>&gt;</span>
                @RenderBody()
            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/angular")
        @Scripts.Render("~/bundles/angular-app")
        @RenderSection("scripts", required: false)
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre>
<p>The important things to note are that we added the <a href="http://docs.angularjs.org/api/ng.directive:ngApp">ng-app</a> attribute to the body and we added a div with the <a href="http://docs.angularjs.org/api/ng.directive:ngView">ng-view</a> attribute. </p>
<p>We don&#39;t have an app yet or a view… but we&#39;ll do that right aways!  </p>
<p>We&#39;ve also updated the page to include our new bundles so that the JavaScript and CSS we create will get delivered properly..  if you build and run the project now (F5), you should see a blank page with a simple header reading &quot;Angular App&quot;. </p>
<p>Hold on there. Sit back down, we&#39;re not done yet.</p>
<p>If we open Web Inspector, we can see that we have a single error; Angular is complaining that we don&#39;t yet have a module called &#39;myApp&#39;</p>
<h3>We need a module!</h3>
<p>Let&#39;s get started creating our angular app so that ng-app attribute actually has something to grab onto.</p>
<p>A module is Angular&#39;s way of separating different concerns. Each file of our app can define its own module or can rely on the default module by accessing the myApp variable by name.</p>
<p>Create a javascript file, called <strong>app.js</strong> in the <strong>~/Scripts/app</strong> folder and let&#39;s create our first module by adding the following code:</p>
<pre><code class="lang-javascript"><span class="string">'use strict'</span>;

<span class="keyword">var</span> myApp = angular.module(<span class="string">'myApp'</span>, []);

myApp.config([<span class="string">'$routeProvider'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($routeProvider)</span> {</span>
    <span class="comment">//Set up routes</span>
    $routeProvider
        .when(<span class="string">'/'</span>, {
            templateUrl: <span class="string">'/Scripts/app/views/home.html'</span>,
            controller: <span class="string">'HomeCtrl'</span>
        })
        .otherwise({
           redirectTo: <span class="string">'/'</span> 
        });
   } ]);</code></pre>
<p>What we&#39;re doing is handling routes on the client side. Since Single Page Apps don&#39;t reload the page, the URL doesn&#39;t appreciably change; instead, we use URL fragments to track logical pages. This means we define checkpoints throughout our app which are bookmarkable and navigable using the back button. In this case, we&#39;re doing the simplest possible thing: using only one endpoint (and associated controller), which is attached to the root &quot;<code>/</code>&quot; URL.</p>
<h3>NEXT!!</h3>
<p>We&#39;ve defined our module, our app, and we&#39;ve defined some routes. Remember the ng-view we defined in the template? This configuration will determine what content gets placed there depending on the route URL in the browser. But, we haven&#39;t created our view template or controller yet!</p>
<p>Create an html file at <strong>~/Scripts/app/views/home.html</strong> and replace the default content with the following:</p>
<pre><code class="lang-html"> <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"span12"</span>&gt;</span>    
    <span class="variable">{{title}}</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
<p>Create a JavaScript file at <strong>~/Scripts/app/controllers/home.js</strong> and add the following content:</p>
<pre><code class="lang-javascript"><span class="string">'use strict'</span>;
angular.module(<span class="string">'myApp.controller'</span>, []).controller(<span class="string">'HomeCtrl'</span>, <span class="keyword">function</span>($scope) {
    $scope.title = “Hello worrrrllld”;    
});</code></pre>
<p>We also have to get our app module set up. In the root module (app.js), change the module definition to include &#39;myApp.controller&#39; as a dependency:</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> myApp = angular.module(<span class="string">'myApp'</span>, [<span class="string">'myApp.controller'</span>]);</code></pre>
<h3>It&#39;s ALIVE!!</h3>
<p>Now, if you rebuild your app and run it, you should see the page rendered with the text from our home view. Interesting? Mind blown? I hope not yet. That would be embarrassing.</p>
<h3>Make it pop!</h3>
<p>Let&#39;s see if we can do something more interesting and make it talk to the server.</p>
<p>Go to the default Web API controller created for us at <strong>~/Controllers/ValuesController.cs</strong>. It&#39;s a silly name, but let&#39;s work with it for now. Let&#39;s modify the <strong>Get()</strong> method a bit…</p>
<pre><code class="lang-cs"><span class="keyword">public</span> IEnumerable&lt;dynamic&gt; Get()
{
    <span class="keyword">return</span> <span class="keyword">new</span> dynamic[] { 
        <span class="keyword">new</span> {name=<span class="string">"Tiger"</span>, sound=<span class="string">"Rawrrr"</span>}, 
        <span class="keyword">new</span> {name=<span class="string">"Dog"</span>, sound=<span class="string">"Ruff"</span>}, 
        <span class="keyword">new</span> {name=<span class="string">"Cat"</span>, sound=<span class="string">"Meowzers"</span>}, 
        <span class="keyword">new</span> {name=<span class="string">"Duck"</span>, sound=<span class="string">"quack"</span>},  
        <span class="keyword">new</span> {name=<span class="string">"Horse"</span>, sound=<span class="string">"Prrbrbrbbrbr"</span>},
        <span class="keyword">new</span> {name=<span class="string">"Rabbit"</span>, sound=<span class="string">"..."</span>},
        <span class="keyword">new</span> {name=<span class="string">"Pig"</span>, sound=<span class="string">"SQUEEEEEEEE"</span>}
    };
}</code></pre>
<p>Let&#39;s also add some code to our angular controller at <strong>home.js</strong>:</p>
<pre><code class="lang-javascript">angular.module(<span class="string">'myApp.controller'</span>, [<span class="string">'ngResource'</span>]).controller(<span class="string">'HomeCtrl'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($scope, $resource)</span> {</span>

    <span class="keyword">var</span> Animal = $resource(<span class="string">'/api/Values/:type'</span>);
    <span class="keyword">var</span> values = Animal.query(<span class="function"><span class="keyword">function</span> <span class="params">(animals)</span> {</span>
        $scope.animals = animals;
    });
});</code></pre>
<p>And let&#39;s see if we can display that in our view too. Adjust the template in your <strong>home.html</strong> file:</p>
<pre><code class="lang-html"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"span12"</span>&gt;</span>
    <span class="variable">{{title}}</span>

    <span class="tag">&lt;<span class="title">ul</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">"animal in animals"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">span</span>&gt;</span><span class="variable">{{animal.name}}</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">li</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
<p>If you build + run the app again, it&#39;ll. --  OH SNAP!</p>
<p>We now have an angular js app that displays a simple home view, retrieves some values from the server, and displays them in a list.</p>
<p>OK. Simple so far, but we&#39;re on our way. We&#39;ve built some functional plumbing that we can extend.</p>
<h3>Make &#39;em Squeal!</h3>
<p>You know what would be cool? What if the animal sounds were displayed when we hovered over the animal names..  but we don&#39;t want to use a lame HTML title.
Hmm, problem. HTML doesn&#39;t have a built-in noise bubble.</p>
<p>Directives to the rescue? Let&#39;s wire one up so that we can add functionality to our template declaratively.  To do the actual rendering, we can integrate bootstrap&#39;s tooltip.</p>
<p>Ok. Create another javascript file at <strong>~/Scripts/app/directives/noisebubble.js</strong> and add the following:</p>
<pre><code class="lang-javascript"><span class="string">'use strict'</span>;
myApp.directive(<span class="string">'noiseBubble'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">return</span> {
        link: <span class="function"><span class="keyword">function</span> <span class="params">(scope, elm, attrs)</span> {</span>
            elm.tooltip({
                title: scope.$eval(attrs.noise)
            });
        }
    };
});</code></pre>
<p>Now that we have a sweet, sweet directive, let&#39;s update our home template:</p>
<pre><code class="lang-html"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"span12"</span>&gt;</span>
  <span class="variable">{{title}}</span>
    <span class="tag">&lt;<span class="title">ul</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">"animal in animals"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">span</span> <span class="attribute">noise-bubble</span> <span class="attribute">noise</span>=<span class="value">"animal.sound"</span>&gt;</span><span class="variable">{{animal.name}}</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">li</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></code></pre>
<p>OH! THAT IS BEAUTIFUL. WHUT! </p>

      </section>
      <footer>
        <p>This project is maintained by <a href="http://DevFacto.com">DevFacto</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
  </body>
</html>